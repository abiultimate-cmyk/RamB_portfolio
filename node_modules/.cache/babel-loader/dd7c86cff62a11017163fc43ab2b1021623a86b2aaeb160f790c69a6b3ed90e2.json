{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function NatRotator(_ref){let{items=[],intervalVd=28000,intervalImg=8000}=_ref;const[index,setIndex]=useState(0);const[transitioning,setTransitioning]=useState(false);const timerRef=useRef(null);const transitionRef=useRef(null);const currentVideoRef=useRef(null);const current=items[index];const nextIndex=(index+1)%items.length;const next=items[nextIndex];const interval=(current===null||current===void 0?void 0:current.type)===\"video\"?intervalVd:intervalImg;useEffect(()=>{if(!items.length)return;clearTimeout(timerRef.current);timerRef.current=setTimeout(()=>{setTransitioning(true);if(currentVideoRef.current){currentVideoRef.current.pause();}transitionRef.current=setTimeout(()=>{setIndex(nextIndex);setTransitioning(false);},1000);// Transition duration\n},interval);return()=>{clearTimeout(timerRef.current);clearTimeout(transitionRef.current);};},[index,items,intervalVd,intervalImg,nextIndex]);useEffect(()=>{if(currentVideoRef.current&&!transitioning){currentVideoRef.current.play().catch(()=>{});// Play current video when not transitioning\n}},[index,transitioning]);if(!current)return null;const renderItem=(item,isCurrent)=>{const className=\"nat-item \".concat(isCurrent?transitioning?'fading-out':'active':transitioning?'fading-in':'next');if(item.type==='video'){return/*#__PURE__*/_jsx(\"video\",{className:className,src:item.src,ref:isCurrent?currentVideoRef:null,muted:true,playsInline:true,controls:true,onEnded:()=>setIndex(i=>(i+1)%items.length),onError:e=>console.error('Video load error:',e)},item.src+(isCurrent?index:nextIndex));}else{return/*#__PURE__*/_jsx(\"img\",{className:className,src:item.src,alt:\"\"},item.src+(isCurrent?index:nextIndex));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"nat-rotator\",\"aria-hidden\":false,children:[renderItem(current,true),transitioning&&next&&renderItem(next,false)]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","NatRotator","_ref","items","intervalVd","intervalImg","index","setIndex","transitioning","setTransitioning","timerRef","transitionRef","currentVideoRef","current","nextIndex","length","next","interval","type","clearTimeout","setTimeout","pause","play","catch","renderItem","item","isCurrent","className","concat","src","ref","muted","playsInline","controls","onEnded","i","onError","e","console","error","alt","children"],"sources":["C:/Users/91741/Ram Website/ReactRam/ramkumar-portfolio/src/components/NatRotator.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function NatRotator({ items = [], intervalVd = 28000, intervalImg = 8000 }) {\r\n    const [index, setIndex] = useState(0);\r\n    const [transitioning, setTransitioning] = useState(false);\r\n    const timerRef = useRef(null);\r\n    const transitionRef = useRef(null);\r\n    const currentVideoRef = useRef(null);\r\n\r\n    const current = items[index];\r\n    const nextIndex = (index + 1) % items.length;\r\n    const next = items[nextIndex];\r\n    const interval = current?.type === \"video\" ? intervalVd : intervalImg;\r\n\r\n    useEffect(() => {\r\n        if (!items.length) return;\r\n        clearTimeout(timerRef.current);\r\n        timerRef.current = setTimeout(() => {\r\n            setTransitioning(true);\r\n            if (currentVideoRef.current) {\r\n                currentVideoRef.current.pause();\r\n            }\r\n            transitionRef.current = setTimeout(() => {\r\n                setIndex(nextIndex);\r\n                setTransitioning(false);\r\n            }, 1000); // Transition duration\r\n        }, interval);\r\n        return () => {\r\n            clearTimeout(timerRef.current);\r\n            clearTimeout(transitionRef.current);\r\n        };\r\n    }, [index, items, intervalVd, intervalImg, nextIndex]);\r\n\r\n    useEffect(() => {\r\n        if (currentVideoRef.current && !transitioning) {\r\n            currentVideoRef.current.play().catch(() => {}); // Play current video when not transitioning\r\n        }\r\n    }, [index, transitioning]);\r\n\r\n    if (!current) return null;\r\n\r\n    const renderItem = (item, isCurrent) => {\r\n        const className = `nat-item ${isCurrent ? (transitioning ? 'fading-out' : 'active') : (transitioning ? 'fading-in' : 'next')}`;\r\n        if (item.type === 'video') {\r\n            return (\r\n                <video\r\n                    key={item.src + (isCurrent ? index : nextIndex)}\r\n                    className={className}\r\n                    src={item.src}\r\n                    ref={isCurrent ? currentVideoRef : null}\r\n                    muted\r\n                    playsInline\r\n                    controls\r\n                    onEnded={() => setIndex((i) => (i + 1) % items.length)}\r\n                    onError={(e) => console.error('Video load error:', e)}\r\n                />\r\n            );\r\n        } else {\r\n            return (\r\n                <img\r\n                    key={item.src + (isCurrent ? index : nextIndex)}\r\n                    className={className}\r\n                    src={item.src}\r\n                    alt=\"\"\r\n                />\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"nat-rotator\" aria-hidden={false}>\r\n            {renderItem(current, true)}\r\n            {transitioning && next && renderItem(next, false)}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}